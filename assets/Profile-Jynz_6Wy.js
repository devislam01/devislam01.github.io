import{f as r,e as K,s as T,n as F,h as M,r as d,i as $,o as R,w as s,a as o,b as n,l as m,c as L,q as Z,k as w,E as q}from"./index-oCaEIrCc.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={style:{"justify-self":"left"}},J=["src"],O={class:"el-upload-list__item-actions"},W=["onClick"],X=["onClick"],ee={style:{"text-align":"center"}},le=["src"],oe={style:{"margin-top":"20px"}},te={__name:"Profile",setup(ae){const g=r(""),p=r(!1),N=t=>{l.value.paymentQRCode=l.value.paymentQRCode.filter(e=>e.uid!==t.uid)},P=t=>{g.value=t.url,p.value=!0},c=K(),v=T(),y=F(),k=r(),_=r(null),l=r({productImage:[],productName:"",productDescription:"",categoryID:1,productCondition:"",productPrice:"",stockQty:""}),U=async()=>{try{await _.value.validate();const t={productImage:"Hello",userName:l.value.userName,email:l.value.email,phoneNumber:l.value.phoneNumber,userGender:l.value.userGender,address:l.value.address,ResidentialCollege:l.value.college,QRCode:l.value.paymentQRCode[0].raw};(await v.updateUserProfile(t)).code===200&&c.success("Update Successfully!")}catch(t){console.log(t)}},Q=async()=>{const t=await v.getUserProfile();l.value.userName=t.userName,l.value.email=t.email,l.value.phoneNumber=t.phoneNumber,l.value.userGender=t.userGender,l.value.address=t.address,l.value.college=t.residentialCollege,t.paymentQRCode!=="https://localhost:7047/"&&t.paymentQRCode!==""&&(l.value.paymentQRCode=[{name:"QR Code.jpg",url:`${t.paymentQRCode}`,status:"finished"}])},C=t=>{const e=t[0];e.uid=q(),c.warning("You can only upload one QR code.")};return M(async()=>{await Q()}),(t,e)=>{const u=d("el-input"),b=d("el-radio"),z=d("el-radio-group"),i=d("el-option"),S=d("el-select"),x=d("el-col"),I=d("Plus"),f=d("el-icon"),D=d("zoom-in"),G=d("Delete"),V=d("el-upload"),j=d("el-dialog"),h=d("el-button"),A=d("el-row"),E=d("el-form");return R(),$(E,{ref_key:"formRef",ref:_,model:l.value},{default:s(()=>[o(A,{style:{"box-shadow":"0 0 10px rgba(0, 0, 0, 0.2)","border-radius":"15px",margin:"20px",width:"75%","justify-self":"center"}},{default:s(()=>[o(x,{span:16,style:{padding:"30px"}},{default:s(()=>[e[11]||(e[11]=n("div",{style:{"text-align":"left"}},[n("div",{style:{float:"left","font-weight":"bold",color:"#0f5841","font-size":"1.8rem",width:"100%","text-align":"left"}}," My Profile "),n("div",{style:{float:"left",color:"#0f5841","font-size":"1.2rem","margin-top":"20px"}}," Name ")],-1)),o(u,{modelValue:l.value.userName,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.userName=a),placeholder:"Please enter your Username",style:{height:"40px"}},null,8,["modelValue"]),e[12]||(e[12]=n("div",{style:{"text-align":"left"}},[n("div",{style:{float:"left",color:"#0f5841","font-size":"1.2rem","margin-top":"20px"}}," Email ")],-1)),o(u,{modelValue:l.value.email,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.email=a),placeholder:"Please enter your Email",style:{height:"40px"}},null,8,["modelValue"]),e[13]||(e[13]=n("div",{style:{"text-align":"left"}},[n("div",{style:{float:"left",color:"#0f5841","font-size":"1.2rem","margin-top":"20px"}}," Phone Number ")],-1)),o(u,{modelValue:l.value.phoneNumber,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.phoneNumber=a),placeholder:"Please enter your Phone Number",style:{height:"40px"}},null,8,["modelValue"]),e[14]||(e[14]=n("div",{style:{"text-align":"left"}},[n("div",{style:{float:"left",color:"#0f5841","font-size":"1.2rem","margin-top":"20px"}}," Gender ")],-1)),n("div",Y,[o(z,{modelValue:l.value.userGender,"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.userGender=a)},{default:s(()=>[o(b,{value:"1"},{default:s(()=>e[9]||(e[9]=[m("Male")])),_:1}),o(b,{value:"2"},{default:s(()=>e[10]||(e[10]=[m("Female")])),_:1})]),_:1},8,["modelValue"])]),e[15]||(e[15]=n("div",{style:{"text-align":"left"}},[n("div",{style:{float:"left",color:"#0f5841","font-size":"1.2rem","margin-top":"20px"}}," Address ")],-1)),o(u,{modelValue:l.value.address,"onUpdate:modelValue":e[4]||(e[4]=a=>l.value.address=a),placeholder:"Please enter your Address",style:{height:"40px"}},null,8,["modelValue"]),e[16]||(e[16]=n("div",{style:{"text-align":"left"}},[n("div",{style:{float:"left",color:"#0f5841","font-size":"1.2rem","margin-top":"20px"}}," Residential College ")],-1)),o(S,{modelValue:l.value.college,"onUpdate:modelValue":e[5]||(e[5]=a=>l.value.college=a),placeholder:"Please choose your Residential College",style:{height:"40px"}},{default:s(()=>[o(i,{label:"Dahlia College",value:"Dahlia College"}),o(i,{label:"Allamanda College",value:"Allamanda College"}),o(i,{label:"Cempaka College",value:"Cempaka College"}),o(i,{label:"Tun Ahmad Zaidi College",value:"Tun Ahmad Zaidi College"}),o(i,{label:"Rafflesia College",value:"Rafflesia College"}),o(i,{label:"Kasturi College",value:"Kasturi College"}),o(i,{label:"Kenanga College",value:"Kenanga College"}),o(i,{label:"Seroja College",value:"Seroja College"}),o(i,{label:"Sakura College",value:"Sakura College"})]),_:1},8,["modelValue"])]),_:1}),o(x,{span:8,style:{padding:"30px","align-content":"center"}},{default:s(()=>[o(V,{"file-list":l.value.paymentQRCode,"onUpdate:fileList":e[6]||(e[6]=a=>l.value.paymentQRCode=a),"list-type":"picture-card",ref:"uploadRef","auto-upload":!1,"show-file-list":!0,action:"https://localhost:7047/api/common/upload",headers:t.header,name:"PaymentQRCode",style:{"justify-content":"center"},limit:1,"on-exceed":C},{file:s(({file:a})=>[n("div",null,[n("img",{class:"el-upload-list__item-thumbnail",src:a.url,alt:""},null,8,J),n("span",O,[n("span",{class:"el-upload-list__item-preview",onClick:B=>P(a)},[o(f,null,{default:s(()=>[o(D)]),_:1})],8,W),t.disabled?Z("",!0):(R(),L("span",{key:0,class:"el-upload-list__item-delete",onClick:B=>N(a)},[o(f,null,{default:s(()=>[o(G)]),_:1})],8,X))])])]),default:s(()=>[o(f,null,{default:s(()=>[o(I)]),_:1})]),_:1},8,["file-list","headers"]),o(j,{modelValue:p.value,"onUpdate:modelValue":e[7]||(e[7]=a=>p.value=a),style:{"align-content":"center"}},{default:s(()=>[n("div",ee,[n("img",{src:g.value,alt:"Preview Image",style:{width:"100%","max-width":"500%"}},null,8,le)])]),_:1},8,["modelValue"]),n("div",oe,[o(V,{modelValue:l.value.userImage,"onUpdate:modelValue":e[8]||(e[8]=a=>l.value.userImage=a),ref_key:"upload",ref:k,action:"#",limit:1,"on-exceed":C,"auto-upload":!1},{default:s(()=>[o(h,{type:"primary",round:"",style:{width:"100%","background-image":"linear-gradient(to right, #0f5841, #87ab9f)"},size:"large"},{default:s(()=>e[17]||(e[17]=[m("Select Receiving QR Code")])),_:1})]),_:1},8,["modelValue"])])]),_:1}),o(h,{round:"",color:"#0F5841",style:{margin:"30px","background-image":"linear-gradient(to right, #0f5841, #87ab9f)",border:"none"},size:"large",onClick:U,loading:w(y).loading,disabled:w(y).loading},{default:s(()=>e[18]||(e[18]=[m("Save Changes")])),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["model"])}}},de=H(te,[["__scopeId","data-v-94dedc61"]]);export{de as default};
