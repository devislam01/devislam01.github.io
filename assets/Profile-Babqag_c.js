import{f as r,e as K,s as T,n as F,h as M,r as d,i as $,o as R,w as s,a as o,b as n,l as p,c as L,q as Z,k as w,E as q}from"./index-Bt2_kKyI.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={style:{"justify-self":"left"}},J=["src"],O={class:"el-upload-list__item-actions"},W=["onClick"],X=["onClick"],ee={style:{"text-align":"center"}},le=["src"],oe={style:{"margin-top":"20px"}},ae={__name:"Profile",setup(te){const g=r(""),m=r(!1),N=a=>{l.value.paymentQRCode=l.value.paymentQRCode.filter(e=>e.uid!==a.uid)},P=a=>{g.value=a.url,m.value=!0},c=K(),v=T(),y=F(),k=r(),_=r(null),l=r({productImage:[],productName:"",productDescription:"",categoryID:1,productCondition:"",productPrice:"",stockQty:""}),U=async()=>{try{await _.value.validate();const a={productImage:"Hello",userName:l.value.userName,email:l.value.email,phoneNumber:l.value.phoneNumber,userGender:l.value.userGender,address:l.value.address,ResidentialCollege:l.value.college,QRCode:l.value.paymentQRCode[0].raw};(await v.updateUserProfile(a)).code===200&&c.success("Update Successfully!")}catch(a){console.log(a)}},Q=async()=>{const a=await v.getUserProfile();l.value.userName=a.userName,l.value.email=a.email,l.value.phoneNumber=a.phoneNumber,l.value.userGender=a.userGender,l.value.address=a.address,l.value.college=a.residentialCollege,a.paymentQRCode!=="https://fyp-production-a7ce.up.railway.app/api"&&a.paymentQRCode!==""&&(l.value.paymentQRCode=[{name:"QR Code.jpg",url:`${a.paymentQRCode}`,status:"finished"}])},C=a=>{const e=a[0];e.uid=q(),c.warning("You can only upload one QR code.")};return M(async()=>{await Q()}),(a,e)=>{const u=d("el-input"),b=d("el-radio"),z=d("el-radio-group"),i=d("el-option"),S=d("el-select"),x=d("el-col"),I=d("Plus"),f=d("el-icon"),D=d("zoom-in"),G=d("Delete"),V=d("el-upload"),j=d("el-dialog"),h=d("el-button"),A=d("el-row"),E=d("el-form");return R(),$(E,{ref_key:"formRef",ref:_,model:l.value},{default:s(()=>[o(A,{style:{"box-shadow":"0 0 10px rgba(0, 0, 0, 0.2)","border-radius":"15px",margin:"20px",width:"75%","justify-self":"center"}},{default:s(()=>[o(x,{span:16,style:{padding:"30px"}},{default:s(()=>[e[11]||(e[11]=n("div",{style:{"text-align":"left"}},[n("div",{style:{float:"left","font-weight":"bold",color:"#0f5841","font-size":"1.8rem",width:"100%","text-align":"left"}}," My Profile "),n("div",{style:{float:"left",color:"#0f5841","font-size":"1.2rem","margin-top":"20px"}}," Name ")],-1)),o(u,{modelValue:l.value.userName,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value.userName=t),placeholder:"Please enter your Username",style:{height:"40px"}},null,8,["modelValue"]),e[12]||(e[12]=n("div",{style:{"text-align":"left"}},[n("div",{style:{float:"left",color:"#0f5841","font-size":"1.2rem","margin-top":"20px"}}," Email ")],-1)),o(u,{modelValue:l.value.email,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.email=t),placeholder:"Please enter your Email",style:{height:"40px"}},null,8,["modelValue"]),e[13]||(e[13]=n("div",{style:{"text-align":"left"}},[n("div",{style:{float:"left",color:"#0f5841","font-size":"1.2rem","margin-top":"20px"}}," Phone Number ")],-1)),o(u,{modelValue:l.value.phoneNumber,"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.phoneNumber=t),placeholder:"Please enter your Phone Number",style:{height:"40px"}},null,8,["modelValue"]),e[14]||(e[14]=n("div",{style:{"text-align":"left"}},[n("div",{style:{float:"left",color:"#0f5841","font-size":"1.2rem","margin-top":"20px"}}," Gender ")],-1)),n("div",Y,[o(z,{modelValue:l.value.userGender,"onUpdate:modelValue":e[3]||(e[3]=t=>l.value.userGender=t)},{default:s(()=>[o(b,{value:"1"},{default:s(()=>e[9]||(e[9]=[p("Male")])),_:1}),o(b,{value:"2"},{default:s(()=>e[10]||(e[10]=[p("Female")])),_:1})]),_:1},8,["modelValue"])]),e[15]||(e[15]=n("div",{style:{"text-align":"left"}},[n("div",{style:{float:"left",color:"#0f5841","font-size":"1.2rem","margin-top":"20px"}}," Address ")],-1)),o(u,{modelValue:l.value.address,"onUpdate:modelValue":e[4]||(e[4]=t=>l.value.address=t),placeholder:"Please enter your Address",style:{height:"40px"}},null,8,["modelValue"]),e[16]||(e[16]=n("div",{style:{"text-align":"left"}},[n("div",{style:{float:"left",color:"#0f5841","font-size":"1.2rem","margin-top":"20px"}}," Residential College ")],-1)),o(S,{modelValue:l.value.college,"onUpdate:modelValue":e[5]||(e[5]=t=>l.value.college=t),placeholder:"Please choose your Residential College",style:{height:"40px"}},{default:s(()=>[o(i,{label:"Dahlia College",value:"Dahlia College"}),o(i,{label:"Allamanda College",value:"Allamanda College"}),o(i,{label:"Cempaka College",value:"Cempaka College"}),o(i,{label:"Tun Ahmad Zaidi College",value:"Tun Ahmad Zaidi College"}),o(i,{label:"Rafflesia College",value:"Rafflesia College"}),o(i,{label:"Kasturi College",value:"Kasturi College"}),o(i,{label:"Kenanga College",value:"Kenanga College"}),o(i,{label:"Seroja College",value:"Seroja College"}),o(i,{label:"Sakura College",value:"Sakura College"})]),_:1},8,["modelValue"])]),_:1}),o(x,{span:8,style:{padding:"30px","align-content":"center"}},{default:s(()=>[o(V,{"file-list":l.value.paymentQRCode,"onUpdate:fileList":e[6]||(e[6]=t=>l.value.paymentQRCode=t),"list-type":"picture-card",ref:"uploadRef","auto-upload":!1,"show-file-list":!0,action:"https://fyp-production-a7ce.up.railway.app/api/common/upload",headers:a.header,name:"PaymentQRCode",style:{"justify-content":"center"},limit:1,"on-exceed":C},{file:s(({file:t})=>[n("div",null,[n("img",{class:"el-upload-list__item-thumbnail",src:t.url,alt:""},null,8,J),n("span",O,[n("span",{class:"el-upload-list__item-preview",onClick:B=>P(t)},[o(f,null,{default:s(()=>[o(D)]),_:1})],8,W),a.disabled?Z("",!0):(R(),L("span",{key:0,class:"el-upload-list__item-delete",onClick:B=>N(t)},[o(f,null,{default:s(()=>[o(G)]),_:1})],8,X))])])]),default:s(()=>[o(f,null,{default:s(()=>[o(I)]),_:1})]),_:1},8,["file-list","headers"]),o(j,{modelValue:m.value,"onUpdate:modelValue":e[7]||(e[7]=t=>m.value=t),style:{"align-content":"center"}},{default:s(()=>[n("div",ee,[n("img",{src:g.value,alt:"Preview Image",style:{width:"100%","max-width":"500%"}},null,8,le)])]),_:1},8,["modelValue"]),n("div",oe,[o(V,{modelValue:l.value.userImage,"onUpdate:modelValue":e[8]||(e[8]=t=>l.value.userImage=t),ref_key:"upload",ref:k,action:"#",limit:1,"on-exceed":C,"auto-upload":!1},{default:s(()=>[o(h,{type:"primary",round:"",style:{width:"100%","background-image":"linear-gradient(to right, #0f5841, #87ab9f)"},size:"large"},{default:s(()=>e[17]||(e[17]=[p("Select Receiving QR Code")])),_:1})]),_:1},8,["modelValue"])])]),_:1}),o(h,{round:"",color:"#0F5841",style:{margin:"30px","background-image":"linear-gradient(to right, #0f5841, #87ab9f)",border:"none"},size:"large",onClick:U,loading:w(y).loading,disabled:w(y).loading},{default:s(()=>e[18]||(e[18]=[p("Save Changes")])),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["model"])}}},de=H(ae,[["__scopeId","data-v-dfcf7d51"]]);export{de as default};
