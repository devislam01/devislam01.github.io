import{u as M}from"./productStore-B929rVAJ.js";import{e as O,B as T,p as G,n as $,f as c,h as J,r as d,i as D,o as v,w as r,a as t,b as a,k as s,v as W,I as A,c as N,q as K,J as X,H as Y,F as Z,j as ee,l as te,E as oe}from"./index-DjjTAdpP.js";import{c as le}from"./constants-BJ-mVNN5.js";const ae=["src"],re={class:"el-upload-list__item-actions"},de=["onClick"],ne=["src"],ie={style:{display:"flex","flex-direction":"column","text-align":"left",width:"100%"}},ue={style:{width:"100%"}},fe={__name:"EditProduct",setup(se){const U=O(),w=T(),C=G(),P=M(),b=$(),V=c(null),o=c({productImage:[],productName:"",productDescription:"",categoryID:1,productCondition:"",productPrice:"",stockQty:""}),f=c(),k=c(""),y=c(!1),h=c(!1),z=async()=>{var p;await V.value.validate();const n=(p=o.value.productImage)==null?void 0:p[0],e=n&&n.raw instanceof File,i={productID:Number(w.query.id),ProductImageFile:e?n.raw:null,ProductImageUrl:e?null:n.url.substring(n.url.indexOf("ProductImages")),productName:o.value.productName,productDescription:o.value.productDescription,categoryID:o.value.categoryID,productCondition:o.value.productCondition,productPrice:o.value.productPrice,stockQty:o.value.stockQty};(await P.updateProductDetails(i)).code===200&&U.success("Update Successfully!"),setTimeout(()=>{C.push("/admin/manageProduct")},1500)},F=async()=>{const n=await P.getProductDetails({ProductID:Number(w.query.id)}),{productName:e,productDescription:i,categoryID:g,productCondition:p,productPrice:_,stockQty:x,productImage:u}=n.data.productDetail;Object.assign(o.value,{productName:e,productDescription:i,categoryID:g,productCondition:p,productPrice:_,stockQty:x,productImage:[{name:u.split("/").pop()||"image.jpg",url:u,status:"success",uid:Date.now()}]})},R=()=>{f.value.clearFiles()},I=n=>{k.value=n.url,y.value=!0},S=n=>{f.value.clearFiles();const e=n[0];e.uid=oe(),f.value.handleStart(e)};return J(async()=>{await F()}),(n,e)=>{const i=d("el-icon"),g=d("RouterLink"),p=d("el-row"),_=d("el-upload"),x=d("el-dialog"),u=d("el-input"),E=d("el-option"),B=d("el-select"),m=d("el-radio-button"),L=d("el-radio-group"),Q=d("el-button"),j=d("el-col"),q=d("el-form");return v(),D(q,{ref_key:"formRef",ref:V,model:o.value},{default:r(()=>[t(j,{span:24,style:{"border-style":"solid","border-color":"#0f5841","border-width":"2px","border-radius":"15px",padding:"20px",margin:"10px"}},{default:r(()=>[t(p,{style:{width:"100%",display:"flex","align-items":"center",gap:"10px","margin-bottom":"20px"}},{default:r(()=>[t(g,{to:"/admin/manageProduct",style:{color:"#0f5841","margin-top":"5px"}},{default:r(()=>[t(i,null,{default:r(()=>[t(s(W))]),_:1})]),_:1}),e[9]||(e[9]=a("div",{style:{"font-weight":"700",color:"#0f5841","font-size":"1.8rem"}}," Edit Product ",-1))]),_:1}),t(_,{"file-list":o.value.productImage,"onUpdate:fileList":e[1]||(e[1]=l=>o.value.productImage=l),ref_key:"uploadRef",ref:f,"list-type":"picture-card","auto-upload":!1,limit:1,"on-preview":I,"on-exceed":S},{file:r(({file:l})=>[a("div",null,[a("img",{class:"el-upload-list__item-thumbnail",src:l.url,alt:""},null,8,ae),a("span",re,[a("span",{class:"el-upload-list__item-preview",onClick:H=>I(l)},[t(i,null,{default:r(()=>[t(s(X))]),_:1})],8,de),h.value?K("",!0):(v(),N("span",{key:0,class:"el-upload-list__item-delete",onClick:e[0]||(e[0]=H=>R())},[t(i,null,{default:r(()=>[t(s(Y))]),_:1})]))])])]),tip:r(()=>e[10]||(e[10]=[a("div",{class:"el-upload__tip text-red"}," limit 1 file, new file will cover the old file ",-1)])),default:r(()=>[t(i,null,{default:r(()=>[t(s(A))]),_:1})]),_:1},8,["file-list"]),t(x,{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=l=>y.value=l)},{default:r(()=>[a("img",{style:{width:"600px",height:"600px","object-fit":"cover"},src:k.value,alt:"Preview Image"},null,8,ne)]),_:1},8,["modelValue"]),e[13]||(e[13]=a("div",{style:{"text-align":"left"}},[a("div",{style:{float:"left",color:"#0f5841","font-size":"1.2rem","margin-top":"20px","font-weight":"500"}}," Product Name ")],-1)),t(u,{modelValue:o.value.productName,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.productName=l),placeholder:"Please Enter your Product Name",style:{height:"40px"}},null,8,["modelValue"]),e[14]||(e[14]=a("div",{style:{"text-align":"left"}},[a("div",{style:{float:"left",color:"#0f5841","font-size":"1.2rem","margin-top":"20px","font-weight":"500"}}," Product Description ")],-1)),t(u,{modelValue:o.value.productDescription,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.productDescription=l),type:"textarea",rows:4,placeholder:"Write your Product Description here..."},null,8,["modelValue"]),e[15]||(e[15]=a("div",{style:{"text-align":"left"}},[a("div",{style:{float:"left",color:"#0f5841","font-size":"1.2rem","margin-top":"20px","font-weight":"500"}}," Product Category ")],-1)),t(B,{modelValue:o.value.categoryID,"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.categoryID=l),placeholder:"Select your Item Category",size:"large",style:{"border-radius":"6px",width:"100%",height:"30px","align-items":"center"}},{default:r(()=>[(v(!0),N(Z,null,ee(s(le),l=>(v(),D(E,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a("div",ie,[e[11]||(e[11]=a("div",{style:{color:"#0f5841","font-size":"1.2rem","margin-top":"20px","font-weight":"500"}}," Product Condition ",-1)),a("div",ue,[t(L,{modelValue:o.value.productCondition,"onUpdate:modelValue":e[6]||(e[6]=l=>o.value.productCondition=l),size:"large",style:{width:"100%",display:"flex","flex-wrap":"wrap"}},{default:r(()=>[t(m,{label:"Brand New",value:"Brand New"}),t(m,{label:"Like New",value:"Like New"}),t(m,{label:"Gently Used",value:"Gently Used"}),t(m,{label:"Moderately Used",value:"Moderately Used"}),t(m,{label:"Heavily Used",value:"Heavily Used"})]),_:1},8,["modelValue"])])]),e[16]||(e[16]=a("div",{style:{"text-align":"left"}},[a("div",{style:{float:"left",color:"#0f5841","font-size":"1.2rem","margin-top":"20px","font-weight":"500"}}," Product Price ")],-1)),t(u,{modelValue:o.value.productPrice,"onUpdate:modelValue":e[7]||(e[7]=l=>o.value.productPrice=l),placeholder:"Please Enter your Product Price",style:{height:"40px"}},null,8,["modelValue"]),e[17]||(e[17]=a("div",{style:{"text-align":"left"}},[a("div",{style:{float:"left",color:"#0f5841","font-size":"1.2rem","margin-top":"20px","font-weight":"500"}}," Product Stock ")],-1)),t(u,{modelValue:o.value.stockQty,"onUpdate:modelValue":e[8]||(e[8]=l=>o.value.stockQty=l),placeholder:"Please Enter your Product Stock Quantity",style:{height:"40px"}},null,8,["modelValue"]),t(Q,{round:"",color:"#0F5841",style:{"background-image":"linear-gradient(to right, #0f5841, #87ab9f)",border:"none","margin-top":"30px",width:"100%"},size:"large",onClick:z,loading:s(b).loading,disabled:s(b).loading},{default:r(()=>e[12]||(e[12]=[te("Update Product ")])),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["model"])}}};export{fe as default};
