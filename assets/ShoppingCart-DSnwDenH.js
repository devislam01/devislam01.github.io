import{e as M,f as m,h as N,r as p,c as w,o as x,a as o,w as n,b as e,F as k,j as R,i as V,t as r,k as _,K as F,I as T,L as B,l as U,D as $}from"./index-e0xVzh0y.js";import{u as L}from"./productStore-6vUAdUaK.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={style:{width:"100%","text-align":"left",color:"#0f5841","font-size":"1.2rem","margin-left":"10px","margin-bottom":"5px"}},K={style:{display:"flex","align-items":"center",gap:"10px"}},Y=["src"],A={style:{color:"#0f5841","font-size":"1.2rem"}},G={style:{color:"#0f5841","font-size":"1.2rem"}},H={style:{display:"flex","align-items":"center",gap:"10px"}},J=["onClick","disabled"],O={style:{color:"#0f5841","font-size":"1.2rem"}},W=["onClick","disabled"],X={style:{color:"#0f5841","font-size":"1.2rem"}},Z=["onClick"],tt={style:{display:"flex","justify-content":"space-between",width:"100%","text-align":"left","margin-top":"20px"}},et={style:{color:"#0f5841","font-size":"1.2rem"}},ot={style:{display:"flex","justify-content":"space-between",width:"100%","text-align":"left","margin-top":"10px"}},nt={style:{color:"#0f5841","font-size":"1.2rem"}},lt={__name:"ShoppingCart",setup(st){const g=L(),C=M(),d=m([]),u=m([]),c=m([]),I=async()=>{d.value=await g.shoppingCart(),u.value=d.value.map(a=>({productID:a.productID,quantity:a.quantity}))},v=async(a,t)=>{const i=u.value.find(l=>l.productID===a);i&&(i.quantity=t),await g.updateCart(u.value)},z=async a=>{const t=d.value.findIndex(l=>l.productID===a),i=u.value.findIndex(l=>l.productID===a);t!==-1&&i!==-1&&(d.value.splice(t,1),u.value.splice(i,1)),await g.updateCart(u.value)},q=()=>{c.value.length===0?C.info("You have to select at least 1 item."):$.push({path:"checkout",query:{productID:c.value}})};N(async()=>{await I()});const b=a=>a.productPrice*a.quantity,h=()=>d.value.reduce((a,t)=>a+b(t),0);return(a,t)=>{const i=p("el-row"),l=p("el-col"),S=p("el-checkbox"),D=p("el-checkbox-group"),y=p("el-icon"),P=p("el-button");return x(),w(k,null,[o(i,null,{default:n(()=>t[1]||(t[1]=[e("div",{style:{float:"left","font-weight":"bold",color:"#0f5841","font-size":"1.8rem",width:"100%","text-align":"left","margin-left":"50px","margin-bottom":"20px"}}," My Shopping Cart ",-1)])),_:1}),o(i,{style:{"align-items":"flex-start"}},{default:n(()=>[o(l,{span:16,style:{padding:"30px","border-style":"solid","border-color":"#0f5841","border-width":"2px","border-radius":"10px","margin-left":"20px"}},{default:n(()=>[o(i,{gutter:20,style:{"border-bottom":"2px solid #0f5841","padding-bottom":"10px"}},{default:n(()=>[o(l,{span:8},{default:n(()=>t[2]||(t[2]=[e("div",{style:{color:"#0f5841","font-size":"1.2rem","text-align":"left","font-weight":"500"}}," Product ",-1)])),_:1}),o(l,{span:5},{default:n(()=>t[3]||(t[3]=[e("div",{style:{color:"#0f5841","font-size":"1.2rem","font-weight":"500"}}," Unit Price ",-1)])),_:1}),o(l,{span:5},{default:n(()=>t[4]||(t[4]=[e("div",{style:{color:"#0f5841","font-size":"1.2rem","font-weight":"500"}}," Quantity ",-1)])),_:1}),o(l,{span:5},{default:n(()=>t[5]||(t[5]=[e("div",{style:{color:"#0f5841","font-size":"1.2rem","font-weight":"500"}}," Subtotal ",-1)])),_:1}),o(l,{span:1})]),_:1}),(x(!0),w(k,null,R(d.value,(s,j)=>(x(),V(i,{key:j,gutter:20,style:{"border-bottom":"2px solid #0f5841","padding-bottom":"10px","margin-top":"10px","margin-bottom":"10px"}},{default:n(()=>[e("div",E," Seller Name: "+r(s.sellerName),1),o(l,{span:8},{default:n(()=>[e("div",K,[o(D,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=f=>c.value=f)},{default:n(()=>[o(S,{value:s.productID},null,8,["value"])]),_:2},1032,["modelValue"]),e("img",{style:{width:"150px",height:"120px","margin-right":"10px","object-fit":"contain"},src:s.productImage,alt:""},null,8,Y),e("div",A,r(s.productName),1)])]),_:2},1024),o(l,{span:5,style:{"align-content":"space-evenly"}},{default:n(()=>[e("div",G," RM "+r(s.productPrice),1)]),_:2},1024),o(l,{span:5,style:{"align-content":"space-evenly","justify-items":"center"}},{default:n(()=>[e("div",H,[e("button",{onClick:f=>v(s.productID,--s.quantity),class:"icon-button",disabled:s.quantity<=1},[o(y,null,{default:n(()=>[o(_(F))]),_:1})],8,J),e("div",O,r(s.quantity),1),e("button",{onClick:f=>v(s.productID,++s.quantity),class:"icon-button",disabled:s.quantity===s.stockQty},[o(y,null,{default:n(()=>[o(_(T))]),_:1})],8,W)])]),_:2},1024),o(l,{span:5,style:{"align-content":"space-evenly"}},{default:n(()=>[e("div",X," RM "+r(b(s)),1)]),_:2},1024),o(l,{span:1,style:{"align-content":"space-evenly"}},{default:n(()=>[e("button",{onClick:f=>z(s.productID),class:"icon-button"},[o(y,null,{default:n(()=>[o(_(B))]),_:1})],8,Z)]),_:2},1024)]),_:2},1024))),128))]),_:1}),o(l,{span:7,style:{padding:"30px","border-style":"solid","border-color":"#0f5841","border-width":"2px","border-radius":"10px","margin-left":"auto","margin-right":"20px","max-height":"fit-content"}},{default:n(()=>[t[9]||(t[9]=e("div",{style:{"text-align":"left"}},[e("div",{style:{float:"left",color:"#0f5841","font-size":"1.2rem","font-weight":"500","margin-bottom":"20px"}}," Cart Total ")],-1)),e("div",tt,[t[6]||(t[6]=e("div",{style:{color:"#0f5841","font-size":"1.2rem"}},"Subtotal:",-1)),e("div",et,"RM "+r(h()),1)]),t[10]||(t[10]=e("hr",{style:{border:"0",height:"2px","background-color":"#0f5841",margin:"10px 0",width:"100%"}},null,-1)),t[11]||(t[11]=e("div",{style:{display:"flex","justify-content":"space-between",width:"100%","text-align":"left","margin-top":"10px"}},[e("div",{style:{color:"#0f5841","font-size":"1.2rem"}},"Shipping:"),e("div",{style:{color:"#0f5841","font-size":"1.2rem"}},"Free")],-1)),t[12]||(t[12]=e("hr",{style:{border:"0",height:"1.5px","background-color":"#0f5841",margin:"10px 0",width:"100%"}},null,-1)),e("div",ot,[t[7]||(t[7]=e("div",{style:{color:"#0f5841","font-size":"1.2rem"}},"Total:",-1)),e("div",nt,"RM "+r(h()),1)]),o(P,{round:"",color:"#0F5841",style:{margin:"30px 0 10px 0","background-image":"linear-gradient(to right, #0f5841, #87ab9f)",border:"none"},size:"large",onClick:q},{default:n(()=>t[8]||(t[8]=[U("Proceed to Checkout")])),_:1})]),_:1})]),_:1})],64)}}},dt=Q(lt,[["__scopeId","data-v-d59d5ea2"]]);export{dt as default};
