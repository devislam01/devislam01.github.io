import{e as E,p as G,f as P,h as H,r as n,i as _,o as c,w as l,a as t,b as p,c as N,F as V,j as D,k as v,l as y,t as I,G as J,fa as K,fb as O}from"./index-CcRD4tYp.js";import{u as W}from"./productStore-CcuUElXd.js";import{c as T,p as X}from"./constants-BJ-mVNN5.js";const Y={style:{margin:"3% auto"}},le={__name:"ManageProduct",setup(Z){const b=W(),w=E(),R=G(),U=r=>{var e;return((e=T.find(s=>s.value===r))==null?void 0:e.label)||"Unknown"},h=P([]),a=P({pageNumber:1,pageSize:10,totalRecord:0,pageCount:0}),u=P({belongsTo:null,productName:null,categoryID:null,productCondition:null}),A=async()=>{u.value={},await i()},i=async()=>{const r={pageNumber:a.value.pageNumber,pageSize:a.value.pageSize,belongsTo:u.value.belongsTo,productName:u.value.productName,categoryID:u.value.categoryID,productCondition:u.value.productCondition},e=await b.getProducts(r);e.code===200&&(h.value=e.data.data,a.value.pageNumber=e.data.pagination.pageNumber,a.value.pageSize=e.data.pagination.pageSize,a.value.totalRecord=e.data.pagination.totalRecord,a.value.pageCount=e.data.pagination.pageCount)},B=r=>{R.push({path:"editProduct",query:{id:r}})},F=async r=>{const e={productID:r},s=await b.unPublishProduct(e);s.code===200&&(w.success(s.message),await i())},L=async r=>{const e={productID:r},s=await b.publishProduct(e);s.code===200&&(w.success(s.message),await i())};return H(i),(r,e)=>{const s=n("el-input"),m=n("el-col"),k=n("el-option"),S=n("el-select"),f=n("el-button"),C=n("el-row"),$=n("el-divider"),d=n("el-table-column"),j=n("el-tag"),x=n("el-icon"),z=n("el-tooltip"),M=n("el-table"),q=n("el-pagination"),Q=n("el-card");return c(),_(Q,{header:"Product List",style:{margin:"7% 3%","min-width":"500px",height:"800px","text-align":"left"}},{default:l(()=>[t(C,{gutter:20},{default:l(()=>[t(m,{span:6},{default:l(()=>[p("div",null,[e[6]||(e[6]=p("span",null,"Belongs To",-1)),t(s,{type:"text",modelValue:u.value.belongsTo,"onUpdate:modelValue":e[0]||(e[0]=o=>u.value.belongsTo=o),placeholder:"Paste the ID here...",clearable:""},null,8,["modelValue"])])]),_:1}),t(m,{span:6},{default:l(()=>[e[7]||(e[7]=p("span",null,"Product Name",-1)),p("div",null,[t(s,{type:"text",modelValue:u.value.productName,"onUpdate:modelValue":e[1]||(e[1]=o=>u.value.productName=o),placeholder:"Paste the name here...",clearable:""},null,8,["modelValue"])])]),_:1}),t(m,{span:6},{default:l(()=>[e[8]||(e[8]=p("span",null,"Category",-1)),p("div",null,[t(S,{modelValue:u.value.categoryID,"onUpdate:modelValue":e[2]||(e[2]=o=>u.value.categoryID=o),placeholder:"--- Select Category ---"},{default:l(()=>[(c(!0),N(V,null,D(v(T),(o,g)=>(c(),_(k,{key:g,value:o.value,label:o.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])]),_:1}),t(m,{span:6},{default:l(()=>[e[9]||(e[9]=p("span",null,"Condition",-1)),p("div",null,[t(S,{modelValue:u.value.productCondition,"onUpdate:modelValue":e[3]||(e[3]=o=>u.value.productCondition=o),placeholder:"--- Select Condition ---"},{default:l(()=>[(c(!0),N(V,null,D(v(X),(o,g)=>(c(),_(k,{key:g,value:o.value,label:o.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])]),_:1}),t(m,{span:24,style:{display:"flex","justify-content":"flex-start","margin-top":"20px"}},{default:l(()=>[t(f,{type:"success",style:{border:"none",width:"90px"},size:"large",onClick:i},{default:l(()=>e[10]||(e[10]=[y("Search")])),_:1}),t(f,{type:"danger",style:{border:"none",width:"90px"},size:"large",onClick:A},{default:l(()=>e[11]||(e[11]=[y("Reset")])),_:1})]),_:1})]),_:1}),t($),t(C,null,{default:l(()=>[t(M,{data:h.value,height:"333",style:{width:"100%"},stripe:""},{default:l(()=>[t(d,{prop:"belongsTo",label:"Belongs To","flex-grow":1,"show-overflow-tooltip":""}),t(d,{prop:"productName",label:"Product Name","flex-grow":1}),t(d,{prop:"categoryID",label:"Category","flex-grow":1},{default:l(({row:o})=>[y(I(U(o.categoryID)),1)]),_:1}),t(d,{prop:"productCondition",label:"Product Condition","flex-grow":1}),t(d,{prop:"productPrice",label:"Product Price","flex-grow":1,formatter:o=>`RM ${o.productPrice.toFixed(2)}`},null,8,["formatter"]),t(d,{prop:"stockQty",label:"Stock Qty","flex-grow":1}),t(d,{prop:"isActive",label:"Status","flex-grow":1},{default:l(({row:o})=>[t(j,{type:o.isActive===!0?"success":"danger"},{default:l(()=>[y(I(o.isActive===!0?"Active":"Inactive"),1)]),_:2},1032,["type"])]),_:1}),t(d,{label:"Action","flex-grow":1},{default:l(({row:o})=>[t(f,{onClick:g=>B(o.productID),type:"primary",style:{color:"white"}},{default:l(()=>[t(x,null,{default:l(()=>[t(v(J))]),_:1})]),_:2},1032,["onClick"]),o.isActive?(c(),_(z,{key:0,content:"Unpublish Product",placement:"top"},{default:l(()=>[t(f,{type:"danger",style:{color:"white","margin-right":"12px"},onClick:g=>F(o.productID)},{default:l(()=>[t(x,null,{default:l(()=>[t(v(K))]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)):(c(),_(z,{key:1,content:"Publish Product",placement:"top"},{default:l(()=>[t(f,{type:"success",style:{color:"white","margin-right":"12px"},onClick:g=>L(o.productID)},{default:l(()=>[t(x,null,{default:l(()=>[t(v(O))]),_:1})]),_:2},1032,["onClick"])]),_:2},1024))]),_:1})]),_:1},8,["data"])]),_:1}),t(C,null,{default:l(()=>[p("div",Y,[t(q,{"current-page":a.value.pageNumber,"onUpdate:currentPage":e[4]||(e[4]=o=>a.value.pageNumber=o),"page-size":a.value.pageSize,"onUpdate:pageSize":e[5]||(e[5]=o=>a.value.pageSize=o),layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,50,100],size:a.value.pageSize,total:a.value.totalRecord,"hide-on-single-page":a.value.pageCount===1&&a.value.totalRecord<=10,onCurrentChange:i,onSizeChange:i},null,8,["current-page","page-size","size","total","hide-on-single-page"])])]),_:1})]),_:1})}}};export{le as default};
